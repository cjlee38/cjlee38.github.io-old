<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title># Hash 맛보기</title>
  <meta name="description" content="">
  
  <meta name="author" content="LEECHANJOO">
  <meta name="copyright" content="&copy; LEECHANJOO 2021">
  

  <!-- google search console -->
  <meta name="google-site-verification" content="dOawqdqcpyXtkSA8Gr6bmoBlbqhEQylxB9MDFJ-hTus" />
  
  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/monokai-sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
  <meta property="og:description" content="" />
  <meta property="og:url" content="https://cjlee38.github.io/btb/what_is_hash">
  <meta property="og:site_name" content="Festina Lente" />
  <meta property="og:title" content="# Hash 맛보기" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://cjlee38.github.io/assets/covers/coding.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="612" />
  <meta property="og:image:height" content="605" />
  

  
  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="# Hash 맛보기">
  <meta name="twitter:description" content="">
  <meta name="twitter:image" content="https://cjlee38.github.io/assets/covers/coding.png">
  <meta name="twitter:url" content="https://cjlee38.github.io/btb/what_is_hash">
  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://cjlee38.github.io/btb/what_is_hash">
	<link rel="alternate" type="application/rss+xml" title="Festina Lente" href="https://cjlee38.github.io/feed.xml" />
	
	<!-- Tooltips -->
	<script type="text/javascript">
		window.tooltips = []
	</script>
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/" class="logo">
      
      <img src="/assets/logo.png" alt="Festina Lente">
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
				
	

	

	

	
	<li class="nav-link"><a href="/about/">About</a>
	

	

	

	
	<li class="nav-link"><a href="/posts/">Posts</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container has-cover" style="background-image: url(/assets/covers/coding.png);">
  <div class="scrim has-cover">
    <header class="post-header">
      <h1 class="title"># Hash 맛보기</h1>
      <p class="info">by <strong>cjlee</strong></p>
    </header>
  </div>
</div>

<div class="wrapper">



<section class="post-meta">
  <div class="post-date">September 25, 2020</div>
  <div class="post-categories">
  in 
    
    <a href="/category/btb">Btb</a>
    
  
  </div>
</section>

<article class="post-content">
  <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>

<h1 id="0-들어가며">0. 들어가며</h1>
<p>: Hash 라는 용어는 주로 암호학에서 많이 사용되지만,<br />
개발자라면 오며가며 한 번쯤은 주워 듣는 용어이기도 하다.</p>

<p>특히, 블록체인을 한 번이라도 공부해봤다면,<br />
Hash 라는 것이 이 블록체인의 핵심 기술 중 하나라는 것을 배웠을 것이다.</p>

<p>동작 원리를 안다고 해도 복호화(Decryption)가 불가능하므로,<br />
암호학을 전공하지 않는 한 깊게 파고들 이유는 없다고 생각하지만,</p>

<p>그렇다고 아예 모르는 것은 개발자에겐 죄악에 가까우므로,<br />
이번 포스팅을 통해 가볍게 <del>혓바닥 한 번 대서 맛이라도 보자는 느낌으로</del> 건드려보자.</p>

<h1 id="1-hash-에-대한-이론">1. Hash 에 대한 이론</h1>
<h2 id="1-what-is-hash">1) What is Hash?</h2>
<p>: Hash란, Hash 함수를 이용하여, “어떤 값을 넣더라도” 고정된 길이의 문자열로 바꿔버리는 것을 의미한다.</p>

<p>Wikipedia에서 설명하는 Hash 함수는 다음과 같이 설명하고 있다.</p>

<hr />

<blockquote>
  <p>A hash function is any function that can be used to map data of arbitrary size to fixed-size values.</p>
</blockquote>

<hr />

<p>즉, 임의의 크기의 데이터가 고정된 크기의 값으로 mapping 시켜버리는 함수를 의미한다.</p>

<p>극단적으로 쉬운 Hash function은, 짝홀수를 만드는 함수다.</p>

<p>다음을 보자.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">int</span> <span class="nf">myHash</span><span class="o">(</span><span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">hashValue</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">hashValue</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">hashvalue</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">hashValue</span><span class="o">;</span>
<span class="o">}</span>

</code></pre></div></div>
<p>사실, 한 줄로도 작성할 수 있는 코드지만, 일부러 위와 같이 작성했다.<br />
각설하고, 위와 같은 코드가 하는 일은, <br />
<u>입력된 숫자가 짝수면 0을, 홀수면 1을 return하는 것이다.</u></p>

<p>이 myHash() 라는 hash 함수에, <br />
1을 집어넣든, 1억을 집어넣든, 1조를 집어넣든, <br />
결국 0 혹은 1의 <strong>고정된 값</strong>이 나온다.</p>

<p>고정된 길이의 값을 출력하므로, 이 함수는 <em>일단은</em> Hash 함수라고 이야기 할 수 있다.</p>

<h2 id="2-hash-함수의-특징">2) Hash 함수의 특징</h2>
<p>: 이러한 Hash 함수는, 다음과 같은 특성을 가진다.</p>

<ol>
  <li>어떠한 값을 입력하더라도, <strong>“고정된 길이”</strong>의 값을 출력한다.</li>
  <li>입력값이 조금이라도 바뀌면, 출력값은 달라진다.</li>
  <li>복호화가 불가능하다.</li>
</ol>

<p>여기서 핵심이라고 볼 수 있는 부분은 2번인데,<br />
주로 암호화 Hash의 경우, Hash 값만 같으면 본래의 값도<br />
동일하다고 취급하는 것이 주 목적이기 때문에, <br />
<strong>최대한 Hash 충돌이 일어나지 않도록</strong> 해야 한다.</p>

<p>일례로, 강의를 들었을 때 교수님께서 재미난 비유를 하나 해주셨는데,<br />
책이 100만 권이 있는 도서관에서, 책의 내용이 단 한 글자라도<br />
바뀌었는지 알기 위해서는, 모든 책을 다 조사할 필요 없이<br />
<strong>책들의 내용을 Hash 값으로 보관</strong>해서 그것만 들고 있기만 한다면 된다는 이야기를 하셨다.</p>

<p>물론, 바뀌었을 때 <strong>“어디가 바뀌었는지?”</strong> 에 대해서는 절대 알 수 없다.</p>

<h2 id="3-hash-함수의-성질">3) Hash 함수의 성질</h2>
<p>: 또한, Hash 함수는 다음을 만족해야 한다. <br />
(정확히는, Cryptographic Hash. 즉 암호화 Hash는 다음을 만족해야 한다.)</p>

<p>　1. 원상 회피(Pre-image resistance)</p>
<ul>
  <li>주어진 해시 값 h에 대해, 다음을 만족하는 메시지 m을 찾는 것은 불가능하다.</li>
</ul>

<script type="math/tex; mode=display">h = H(m)</script>

<p>　2. 두 번째 원상 회피(Pre-image resistance)</p>
<ul>
  <li>주어진 메시지 m에 대해, 다음을 만족하는 또 다른 메시지 m’을 찾는 것은 불가능하다.</li>
</ul>

<script type="math/tex; mode=display">m \neq m' 이면서 H(m) = H(m')</script>

<p>　3. 충돌 회피(Collision resistance)</p>
<ul>
  <li>다음을 만족하는 두 메시지 m과 m’를 찾는 것은 불가능하다.</li>
</ul>

<script type="math/tex; mode=display">m \neq m' 이면서 H(m) = H(m')</script>

<p>말이 좀 어려우므로, 바꿔서 설명하면 다음과 같다</p>

<ol>
  <li>Hash의 결과값을 보고, 본래의 값을 찾는 것은 어렵다.</li>
  <li>입력값을 보고, 이 입력과 같은 해쉬값을 출력하는 다른 입력값을 찾는 것이 어렵다.</li>
  <li>Hash의 결과값이 같은 두 입력값을 찾는 것이 어려워야 한다. 즉, <strong>Hash 충돌</strong>에 안전해야 한다.</li>
</ol>

<p>이 세 가지를 만족시켜야, 비로소 <strong>“진정한”</strong> 암호화 Hash 함수라고 일컬을 수 있다.</p>

<p>아까 작성했던 짝홀수로 만든 Hash 함수를 보자.</p>

<p>우리는 0 혹은 1이라는 값을 보고, 본래의 값이 무엇이었는지 알 수 없다. 따라서, 원상회피의 조건을 만족한다.</p>

<p>두 번째로, 우리가 3이라는 값이 주어졌을 때, 5라는 값으로 바꿔 넣으면 <br />
같은 Hash 값인 1이 출력된다는 것을 <strong>쉽게</strong> 알 수 있다.<br />
따라서, 짝홀수 Hash 함수는 두 번째 원상회피를 만족하지 못한다고 볼 수 있다.</p>

<p>마찬가지로, 0 혹은 1이라는 결과값을 내뱉는 본래의 값은 1,3,5… 임을 <strong>쉽게</strong> 알 수 있다.<br />
이는 충돌회피 또한 만족하지 못한다고 볼 수 있다.</p>

<h2 id="4-hash-충돌">4) Hash 충돌</h2>
<p>: 위 짝홀수 Hash 함수가 가장 대표적인 Hash 충돌의 예시가 된다.<br />
세상 모든 정수는 짝홀수로 구분할 수 있고, 따라서 Hash 값은 무조건 0 혹은 1이 된다.</p>

<p>1과 3은 1이라는 같은 값을 출력하므로 충돌이고,<br />
1과 5 또한 1이라는 같은 값을 출력하므로 충돌이다.</p>

<p>암호화 Hash 에서는 이 충돌을 막기 위해 다양하고 복잡한 방법을 사용한다.</p>

<h1 id="2-hash에-기반한-공격과-수비">2. Hash에 기반한 공격과 수비</h1>
<h2 id="1-sha-256">1) SHA-256</h2>
<p>: 위 Hash 함수의 성질을 지키기 위해, 여러 Hash 알고리즘들이 고안되었다.</p>

<p>당장, <a href="https://www.convertstring.com/ko/Hash/SHA256">해쉬 생성기</a> 사이트로 이동해서, <br />
아무런 값이나 입력해보면 <br />
<strong>F03B8A4D721D828D8C972CC84C023EA67022CE5D0F8E650FB59D22E4B187DA6E</strong><br />
이러한 알 수 없는 숫자가 튀어나오는 것을 볼 수 있다.</p>

<p>지금 예시로 보여준 Hash 값은 SHA-256의 결과인데, 이름처럼<br />
256 bit(64글자 * 16진수(4 bit)) 로 생성된 결과임을 알 수 있다.</p>

<p>단순히 생각해보더라도, 256 bit 라면, <strong>2<sup>256</sup></strong> 이고,<br />
이는 지수표기법으로는<br />
<strong>1.1579208923731619542357098500869e+77</strong> <br />
이라는 말도안되게 거대한 숫자가 나온다.</p>

<p>즉, 단순하게 생각하면 위 숫자의 개수만큼 데이터를 집어넣지 않는 이상, 충돌이 나지 않는다는 이야기다.<br />
(물론 비둘기집의 원리를 고려하면, 실제로는 그렇지 않겠지만)</p>

<hr />

<blockquote>
  <p>여담으로, Firefox를 이용해서 학교 홈페이지에 로그인 해보니, Firefox의 비밀번호를 저장하겠냐는 질문과 함께 원본 데이터를 볼 수 있었다.<br />
숫자가 뭔가 낯이 익다 싶어서 보니 16진수인 것을 확인할 수 있었고, <br />
위 Hash 생성기에 내 비밀번호를 SHA-512에 넣어보니 같은 값임을 확인할 수 있었다.</p>

  <p>이 때, 정말 신기하면서도 “Hash … 라서 괜찮겠지?” 하고 넘겼던 기억이 난다.</p>
</blockquote>

<hr />

<h2 id="2-rainbow-table">2) Rainbow Table</h2>
<p>: 결국, 이 Hash 함수는 복호화가 불가능하므로, <br />
있는대로 때려 맞춰보는 <strong>brute force</strong> 가 Hash 를 뚫는 기본적인 방법이 되시겠다.</p>

<p>어떤 해커가, 철수라는 사람의 비밀번호의 Hash 값을 알아냈는데,<br />
이 원본 값을 찾기 위해 가능한 모든 입력값들을 다 때려박아서 비밀번호를 찾아냈다.</p>

<p>그렇다면, 이 철수라는 사람과 같은 Hash 값을 갖고 있는<br />
다른 모~든 사람들의 원본 값도 다 똑같은 값일 것임은 자명하다.<br />
그렇다면, <strong>모든 입력값과 모든 Hash 값을 다 저장</strong>해놓는다면 어떨까?</p>

<p>Hash 함수가 취약하다면, 어지간한 Hash의 원본 값은 다 찾을 수 있을 것이다.<br />
그리고, 매 번 찾을 필요가 없이, 그냥 새로운 해킹 대상이 들어올 때마다<br />
<strong>미리 저장해놓은 곳</strong>에서 Hash 값을 보고 원본 값을 찾아내서 입력하기만 하면 된다.</p>

<p><strong>이렇게 저장해놓은 Table을 Rainbow Table</strong>이라 한다.<br />
(실제로는 이보다 좀 더 복잡한 방식으로 저장한다고 한다.)</p>

<h2 id="3-salting">3) Salting</h2>
<p>: Salting. 말 그대로 소금을 치는 것이다.<br />
Rainbow Table에 맞서 나온 대응책이다.</p>

<p>원리는 간단하다.</p>

<p>만약 김철수가 “hello” 라는 값을 비밀번호로 저장하려고 했다면,<br />
거기에 “Kim” 이라는 값을 추가해서 Hash 함수를 적용한다.</p>

<p>다음으로, 홍길동이 똑같이 “hello” 라는 값을 비밀번호로 저장하려고 했다면,<br />
거기에 “Hong” 이라는 값을 추가해서 Hash 함수를 적용한다.</p>

<p>즉, “Kim” 혹은 “Hong” 이라는 소금을 치는 것이다.</p>

<p>이렇게 하면, 같은 비밀번호를 사용하더라도 다른 Hash 값이 저장되고,<br />
<strong>“값이 조금이라도 달라지면 출력값은 완전히 달라지므로”</strong> Rainbow Table에 대응할 수 있게 된다.</p>

<h1 id="3-마치며">3. 마치며</h1>
<p>: Hash에 대한 개념은, 암호학, 컴퓨터공학을 넘어서 IT에 발가락 하나라도 담그고 있는 사람이라면 반드시 알아야 하는 개념이라고 생각한다.</p>

<p>나중에 정말 여유가 되면, 교수님께 배웠던 블록체인 시리즈도 꼭 다뤄보고 싶다.</p>

<h1 id="reference">Reference</h1>
<ul>
  <li>한국외대 이병욱 교수님, 정보보안 강의교안.</li>
  <li><a href="https://en.wikipedia.org/wiki/Hash_function">Hash function</a></li>
</ul>


</article>





<section class="rss">
  <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
</section>

<section class="share">
  <span>Share: </span>
  
    
    
    
    
    
    
    
    
  
</section>

	<section class="post-navigation">
		<span class="prev-post">
			
				<a href="/jsp/jsp_learning_06">
					<span class="fa-stack fa-lg">
						<i class="fa fa-square fa-stack-2x"></i>
						<i class="fa fa-angle-double-left fa-stack-1x fa-inverse"></i>
					</span>
					<span class="page-number"># 6. JSP 학습기록 - doGet, doPost와 JSP, 그리고 EL(Expression Language) </span>
				</a>
			
		</span>
		<span class="next-post">
			
				<a href="/btb/TDD-by-jaesung_park">
					<span class="page-number"># 박재성 - 의식적인 연습으로 TDD, 리팩토링 연습하기</span>
					<span class="fa-stack fa-lg">
						<i class="fa fa-square fa-stack-2x"></i>
						<i class="fa fa-angle-double-right fa-stack-1x fa-inverse"></i>
					</span>
				</a>
			
		</span>
	</section>




<section class="disqus">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'games2';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">Festina Lente</h3>

    <div class="site-navigation">

      <p><strong>Site Map</strong></p>
      <ul class="pages">
				
	

	

	

	
	<li class="nav-link"><a href="/about/">About</a>
	

	

	

	
	<li class="nav-link"><a href="/posts/">Posts</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:gptpem38@gmail.com">
            <i class="fa fa-envelope-o"></i>
            <span class="username">gptpem38@gmail.com</span>
          </a>
        </li>

        
          
          <li>
            <a href="https://github.com/cjlee38" title="Fork me on GitHub">
              <i class="fa fa-github"></i>
              <span class="username">cjlee38</span>
            </a>
          </li>
          
        

      </ul>
    </div>

    <div class="site-signature">
      <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
      <p class="text">Data Warehouse
</p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/js/lightbox.min.js"></script>
<script src="//unpkg.com/popper.js@1"></script>
<script src="//unpkg.com/tippy.js@5"></script>

<script type="text/javascript">
$(document).ready(function() {
  // Default syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });

	// Enable tooltips via Tippy.js
	if (Array.isArray(window.tooltips)) {
		window.tooltips.forEach(function(tooltip) {
			var selector = tooltip[0];
			var config = tooltip[1];
			tippy(selector, config);
		})
	}
});

</script>




<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-174927148-1', 'auto');
  ga('send', 'pageview', {
    'page': '/btb/what_is_hash',
    'title': '# Hash 맛보기'
  });
</script>



  </body>

</html>
